version: '2'
services:
  test-runner:
    build: .
    container_name: te_unit_tests
    volumes:
      - "${WORKSPACE}:/tE-backend"
      - ./scripts:/scripts
    environment:
      - DJANGO_SETTINGS_MODULE=tRecorderApi.settings_test
    command: bash -c "chmod +x /scripts/wait-for-it.sh
                      && chmod +x /scripts/run-tests.sh
                      && /scripts/wait-for-it.sh -h db -p 5432 -- /scripts/run-tests.sh"
